% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sparql.R
\name{dc_post_sparql}
\alias{dc_post_sparql}
\title{Execute a SPARQL Query via POST to the Data Commons API}
\usage{
dc_post_sparql(
  query,
  api_key = Sys.getenv("DATACOMMONS_API_KEY"),
  base_url = Sys.getenv("DATACOMMONS_BASE_URL", unset =
    "https://api.datacommons.org/v2/"),
  method = "list"
)
}
\arguments{
\item{query}{A character string containing a valid SPARQL query.}

\item{api_key}{Your Data Commons API key. If not provided, the function will
use the \code{DATACOMMONS_API_KEY} environment variable.}

\item{base_url}{The base URL for the Data Commons API. Defaults to the public
endpoint \code{https://api.datacommons.org/v2/}. Can also be set via the
\code{DATACOMMONS_BASE_URL} environment variable.}

\item{method}{Specifies the response format: \code{"list"} for a parsed R object,
or \code{"json"} for the raw JSON string.}
}
\value{
A list (if \code{method = "list"}) or a JSON string (if \code{method = "json"}),
representing the SPARQL query results.
}
\description{
Sends a SPARQL query to the Data Commons SPARQL endpoint using a POST request.
The API key is passed in the header, and the query is included as JSON in the request body.
}
\examples{

# Get a list of all cities with a particular property
query <- c(
  paste0(
    "SELECT DISTINCT ?subject ",
    "WHERE {?subject unDataLabel ?object . ?subject typeOf City} LIMIT 10"
  )
)
dc_post_sparql(query)

# Get a list of biological specimens
query <- c(
  paste0(
    "SELECT DISTINCT ?name ",
    "WHERE {?biologicalSpecimen typeOf BiologicalSpecimen . ",
    "?biologicalSpecimen name ?name} ",
    "ORDER BY DESC(?name)",
    "LIMIT 10"
  )
)
dc_post_sparql(query)

}
